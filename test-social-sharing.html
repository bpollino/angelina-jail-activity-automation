<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Sharing Test - Angelina County Jail Activity</title>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Lightbox CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .jail-activity-article {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #007acc;
            border-bottom: 3px solid #007acc;
            padding-bottom: 10px;
        }
        
        .social-sharing button {
            transition: all 0.2s ease;
        }
        
        .social-sharing button:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .facebook-share:hover { background-color: #166fe5 !important; }
        .twitter-share:hover { background-color: #1991da !important; }
        .copy-link:hover { background-color: #5a6268 !important; }
    </style>
</head>
<body>
    <div class="jail-activity-article">
        <h1>Angelina County Jail Activity - Tuesday</h1>
        <p><em>Booking activity data, details and images provided by courtesy of the Angelina County Sheriff's Department.</em></p>
        
        <div style="background-color: #f8f9fa; border-left: 4px solid #007acc; padding: 15px 20px; margin: 20px 0; border-radius: 4px;">
            <p><strong><em>All person(s) listed below are considered innocent until proven guilty in a court of law.</em></strong></p>
        </div>

        <!-- Sample Arrestee Record 1 -->
        <div class="arrestee-record" id="record-1701234567-0" data-record-id="record-1701234567-0" style="display: flex; gap: 20px; margin: 30px 0; padding: 20px; border: 1px solid #e1e1e1; border-radius: 8px; background-color: #fafafa; position: relative;">
            <div class="mugshot-container" style="flex-shrink: 0;">
                <div style="width: 150px; height: 180px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 6px; border: 2px dashed #dee2e6; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #6c757d; text-align: center; font-size: 11px; padding: 10px; box-sizing: border-box;">
                    <div style="font-size: 24px; margin-bottom: 8px; opacity: 0.5;">ðŸ“·</div>
                    <div style="line-height: 1.3;">Photo Not<br>Available</div>
                </div>
            </div>
            <div class="arrestee-details" style="flex: 1;">
                <p><strong>Name:</strong> <span class="arrestee-name">Smith, John Michael</span></p>
                <p><strong>Age:</strong> <span class="arrestee-age">32</span></p>
                <p><strong>City:</strong> <span class="arrestee-city">Lufkin</span></p>
                <p><strong>State:</strong> <span class="arrestee-state">TX</span></p>
                <p><strong>Height:</strong> <span class="arrestee-height">5'10"</span></p>
                <p><strong>Weight:</strong> <span class="arrestee-weight">175 lbs</span></p>
                <p><strong>Booked:</strong> <span class="booking-date">12/19/2023 14:30</span></p>
                
                <div style="margin-top: 15px;">
                    <p><strong>Charges:</strong></p>
                    <ul class="charges-list" style="margin: 8px 0; padding-left: 20px;">
                        <li>Driving While Intoxicated (Bond: $2,500.0)</li>
                        <li>Failure to Maintain Financial Responsibility (Bond: $500.0)</li>
                    </ul>
                </div>
                
                <!-- Social Sharing Buttons -->
                <div class="social-sharing" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e1e1e1;">
                    <p style="margin: 0 0 8px 0; font-size: 12px; color: #666; font-weight: bold;">Share this record:</p>
                    <div style="display: flex; gap: 8px;">
                        <button class="share-btn facebook-share" data-platform="facebook" style="background: #1877f2; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                            <i class="fab fa-facebook-f" style="font-size: 11px;"></i>
                            Share
                        </button>
                        <button class="share-btn twitter-share" data-platform="twitter" style="background: #1da1f2; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                            <i class="fab fa-twitter" style="font-size: 11px;"></i>
                            Tweet
                        </button>
                        <button class="share-btn copy-link" data-platform="copy" style="background: #6c757d; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                            <i class="fas fa-link" style="font-size: 11px;"></i>
                            Copy Link
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sample Arrestee Record 2 -->
        <div class="arrestee-record" id="record-1701234567-1" data-record-id="record-1701234567-1" style="display: flex; gap: 20px; margin: 30px 0; padding: 20px; border: 1px solid #e1e1e1; border-radius: 8px; background-color: #fafafa; position: relative;">
            <div class="mugshot-container" style="flex-shrink: 0;">
                <a href="https://via.placeholder.com/150x180/cccccc/666666?text=Mugshot" data-lightbox="mugshots" data-title="Jane Doe">
                    <img src="https://via.placeholder.com/150x180/cccccc/666666?text=Mugshot" alt="Mugshot of Jane Doe" style="width: 100%; max-width: 150px; border-radius: 6px; border: 2px solid #ddd;">
                </a>
            </div>
            <div class="arrestee-details" style="flex: 1;">
                <p><strong>Name:</strong> <span class="arrestee-name">Doe, Jane Elizabeth</span></p>
                <p><strong>Age:</strong> <span class="arrestee-age">28</span></p>
                <p><strong>City:</strong> <span class="arrestee-city">Huntington</span></p>
                <p><strong>State:</strong> <span class="arrestee-state">TX</span></p>
                <p><strong>Height:</strong> <span class="arrestee-height">5'6"</span></p>
                <p><strong>Weight:</strong> <span class="arrestee-weight">140 lbs</span></p>
                <p><strong>Booked:</strong> <span class="booking-date">12/19/2023 08:15</span></p>
                <p><strong>Released:</strong> <span class="release-date">12/19/2023 16:45</span></p>
                
                <div style="margin-top: 15px;">
                    <p><strong>Charges:</strong></p>
                    <ul class="charges-list" style="margin: 8px 0; padding-left: 20px;">
                        <li>Theft of Property (Bond: $1,000.0)</li>
                    </ul>
                </div>
                
                <!-- Social Sharing Buttons -->
                <div class="social-sharing" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e1e1e1;">
                    <p style="margin: 0 0 8px 0; font-size: 12px; color: #666; font-weight: bold;">Share this record:</p>
                    <div style="display: flex; gap: 8px;">
                        <button class="share-btn facebook-share" data-platform="facebook" style="background: #1877f2; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                            <i class="fab fa-facebook-f" style="font-size: 11px;"></i>
                            Share
                        </button>
                        <button class="share-btn twitter-share" data-platform="twitter" style="background: #1da1f2; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                            <i class="fab fa-twitter" style="font-size: 11px;"></i>
                            Tweet
                        </button>
                        <button class="share-btn copy-link" data-platform="copy" style="background: #6c757d; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                            <i class="fas fa-link" style="font-size: 11px;"></i>
                            Copy Link
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <hr style="margin: 30px 0;">
        <p><em>Published by Angelina411 News Team</em></p>
    </div>

    <!-- Lightbox JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
    
    <!-- Social Sharing JavaScript -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        initializeSocialSharing();
    });

    function initializeSocialSharing() {
        const shareButtons = document.querySelectorAll('.share-btn');
        
        shareButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const platform = this.dataset.platform;
                const record = this.closest('.arrestee-record');
                const recordData = extractRecordData(record);
                
                handleShare(platform, recordData, record);
            });
        });
    }

    function extractRecordData(recordElement) {
        const nameEl = recordElement.querySelector('.arrestee-name');
        const ageEl = recordElement.querySelector('.arrestee-age');
        const cityEl = recordElement.querySelector('.arrestee-city');
        const stateEl = recordElement.querySelector('.arrestee-state');
        const bookingDateEl = recordElement.querySelector('.booking-date');
        const chargesElements = recordElement.querySelectorAll('.charges-list li');
        
        const name = nameEl ? nameEl.textContent.trim() : 'Unknown';
        const age = ageEl ? ageEl.textContent.trim() : 'Unknown';
        const city = cityEl ? cityEl.textContent.trim() : '';
        const state = stateEl ? stateEl.textContent.trim() : '';
        const bookingDate = bookingDateEl ? bookingDateEl.textContent.trim() : '';
        
        const charges = Array.from(chargesElements).map(el => el.textContent.trim());
        
        return {
            name, age, city, state, bookingDate, charges,
            recordId: recordElement.dataset.recordId
        };
    }

    function handleShare(platform, recordData, recordElement) {
        const baseUrl = window.location.href.split('#')[0];
        const recordUrl = baseUrl + '#' + recordData.recordId;
        const shareText = createShareText(recordData);
        
        console.log('Sharing:', { platform, recordData, recordUrl, shareText });
        
        switch(platform) {
            case 'facebook':
                shareFacebook(recordUrl, shareText);
                break;
            case 'twitter':
                shareTwitter(recordUrl, shareText);
                break;
            case 'copy':
                copyToClipboard(recordUrl, recordElement);
                break;
        }
    }

    function createShareText(recordData) {
        const location = recordData.city && recordData.state ? 
            recordData.city + ', ' + recordData.state : 
            (recordData.city || recordData.state || 'Angelina County');
        
        const primaryCharge = recordData.charges.length > 0 ? 
            recordData.charges[0].split('(')[0].trim() : 
            'Multiple charges';
        
        return 'Angelina County Jail Activity: ' + recordData.name + ', age ' + recordData.age + ' from ' + location + ' - ' + primaryCharge + '. Booked ' + recordData.bookingDate;
    }

    function shareFacebook(url, text) {
        const shareUrl = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url) + '&quote=' + encodeURIComponent(text);
        openShareWindow(shareUrl, 'Facebook');
    }

    function shareTwitter(url, text) {
        const tweetText = text.length > 240 ? text.substring(0, 237) + '...' : text;
        const shareUrl = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweetText) + '&url=' + encodeURIComponent(url);
        openShareWindow(shareUrl, 'Twitter');
    }

    function copyToClipboard(url, recordElement) {
        if (navigator.clipboard) {
            navigator.clipboard.writeText(url).then(function() {
                showCopyFeedback(recordElement);
            }).catch(function(err) {
                fallbackCopyToClipboard(url, recordElement);
            });
        } else {
            fallbackCopyToClipboard(url, recordElement);
        }
    }

    function fallbackCopyToClipboard(text, recordElement) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        textArea.style.top = '-999999px';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        
        try {
            document.execCommand('copy');
            showCopyFeedback(recordElement);
        } catch (err) {
            console.error('Copy failed:', err);
        }
        
        document.body.removeChild(textArea);
    }

    function showCopyFeedback(recordElement) {
        const button = recordElement.querySelector('.copy-link');
        const originalHTML = button.innerHTML;
        
        button.innerHTML = '<i class="fas fa-check"></i> Copied!';
        button.style.background = '#28a745';
        
        setTimeout(function() {
            button.innerHTML = originalHTML;
            button.style.background = '#6c757d';
        }, 2000);
    }

    function openShareWindow(url, platform) {
        const width = 600;
        const height = 400;
        const left = (window.innerWidth - width) / 2;
        const top = (window.innerHeight - height) / 2;
        
        window.open(
            url,
            'share-' + platform,
            'width=' + width + ',height=' + height + ',left=' + left + ',top=' + top + ',resizable=yes,scrollbars=yes'
        );
    }
    </script>
</body>
</html>